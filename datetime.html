<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>To-Do List</title>
  <style>
    body { font-family: sans-serif; padding: 20px; }
    input, button { margin: 5px; }
    ul { list-style: none; padding-left: 0; }
    li { margin-bottom: 10px; }
  </style>
</head>
<body>

  <h2>To-Do List</h2>

  <!-- Input fields -->
  <input type="text" id="taskInput" placeholder="Task">
  <input type="datetime-local" id="datetimeInput">
  <button onclick="addTask()">Add Task</button>

  <!-- Task List -->
  <ul id="todoList"></ul>

  <script>
    function addTask() {
      const taskInput = document.getElementById('taskInput');
      const datetimeInput = document.getElementById('datetimeInput');
      const task = taskInput.value;
      const datetime = datetimeInput.value;

      if (!task || !datetime) {
        alert("Please enter task and date/time.");
        return;
      }

      const list = document.getElementById('todoList');

      const li = document.createElement('li');
      li.innerHTML = `
        <strong>${task}</strong> -
        <span class="datetime">${formatDateTime(datetime)}</span>
        <button onclick="editDateTime(this)">Edit</button>
      `;
      list.appendChild(li);

      // Clear inputs
      taskInput.value = '';
      datetimeInput.value = '';
    }

    function editDateTime(button) {
      const li = button.parentElement;
      const dateSpan = li.querySelector('.datetime');

      const oldText = dateSpan.textContent;
      const defaultValue = convertDisplayToInputValue(oldText);

      const newDate = prompt("Enter new date/time (e.g. 2025-5-10T14:30):", defaultValue);

      if (newDate) {
        const date = new Date(newDate);
        if (!isNaN(date)) {
          dateSpan.textContent = formatDateTime(newDate);
        } else {
          alert("Invalid date format.");
        }
      }
    }

    function formatDateTime(value) {
      const date = new Date(value);
      const year = date.getFullYear();
      const month = date.getMonth() + 1;  // JavaScript months start at 0
      const day = date.getDate();
      const hour = date.getHours();
      const minute = date.getMinutes();
      return year + '-' + month + '-' + day + ' ' + hour + ':' + minute;
    }

    function convertDisplayToInputValue(displayText) {
      // Example input: "2025-5-1 9:30"
      const parts = displayText.split(" ");
      const dateParts = parts[0].split("-");
      const timeParts = parts[1].split(":");

      const year = dateParts[0];
      const month = dateParts[1];
      const day = dateParts[2];
      const hour = timeParts[0];
      const minute = timeParts[1];

      return year + '-' + month + '-' + day + 'T' + hour + ':' + minute;
    }
  </script>

</body>
</html>
